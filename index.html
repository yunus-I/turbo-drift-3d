<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <!-- Mobile optimizations -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="theme-color" content="#000000" />
    <title>Turbo Drift 3D | Cyberpunk Racing</title>
    <style>
        /* ===== RESET & GLOBAL ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            overflow: hidden;
            background-color: #050505;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            color: #fff;
        }

        /* ===== CSS VARIABLES (CYBERPUNK THEME) ===== */
        :root {
            --neon-cyan: #00ffcc;
            --neon-pink: #ff0066;
            --neon-purple: #aa00ff;
            --bg-dark: #0a0a0a;
            --bg-overlay: rgba(0, 0, 0, 0.85);
            --glow-cyan: 0 0 15px rgba(0, 255, 204, 0.7);
            --glow-pink: 0 0 15px rgba(255, 0, 102, 0.7);
            --font-mono: 'Courier New', Courier, monospace;
            --transition: all 0.2s ease;
        }

        /* ===== UTILITY CLASSES ===== */
        .hidden {
            display: none !important;
        }

        .flex-center {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .glitch-text {
            text-shadow: 0.05em 0 0 rgba(255,0,0,0.75), -0.025em -0.05em 0 rgba(0,255,255,0.75), 0.025em 0.05em 0 rgba(0,0,255,0.75);
            animation: glitch 2s infinite;
        }

        @keyframes glitch {
            0% { text-shadow: 0.05em 0 0 rgba(255,0,0,0.75), -0.05em -0.025em 0 rgba(0,255,255,0.75), 0.025em 0.05em 0 rgba(0,0,255,0.75); }
            14% { text-shadow: 0.05em 0 0 rgba(255,0,0,0.75), -0.05em -0.025em 0 rgba(0,255,255,0.75), 0.025em 0.05em 0 rgba(0,0,255,0.75); }
            15% { text-shadow: -0.05em -0.025em 0 rgba(255,0,0,0.75), 0.025em 0.025em 0 rgba(0,255,255,0.75), -0.05em -0.05em 0 rgba(0,0,255,0.75); }
            49% { text-shadow: -0.05em -0.025em 0 rgba(255,0,0,0.75), 0.025em 0.025em 0 rgba(0,255,255,0.75), -0.05em -0.05em 0 rgba(0,0,255,0.75); }
            50% { text-shadow: 0.025em 0.05em 0 rgba(255,0,0,0.75), 0.05em 0 0 rgba(0,255,255,0.75), 0 -0.05em 0 rgba(0,0,255,0.75); }
            99% { text-shadow: 0.025em 0.05em 0 rgba(255,0,0,0.75), 0.05em 0 0 rgba(0,255,255,0.75), 0 -0.05em 0 rgba(0,0,255,0.75); }
            100% { text-shadow: 0.05em 0 0 rgba(255,0,0,0.75), -0.05em -0.025em 0 rgba(0,255,255,0.75), 0.025em 0.05em 0 rgba(0,0,255,0.75); }
        }

        /* ===== LOADING SCREEN ===== */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s;
        }

        #loading-screen h1 {
            font-size: clamp(2rem, 10vw, 4rem);
            color: var(--neon-cyan);
            text-shadow: var(--glow-cyan);
            margin-bottom: 2rem;
            letter-spacing: 4px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }

        .progress-container {
            width: min(300px, 80%);
            height: 8px;
            background: #222;
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
            box-shadow: 0 0 10px rgba(0,255,204,0.3);
        }

        #loading-progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, var(--neon-cyan), var(--neon-pink));
            transition: width 0.3s;
            box-shadow: 0 0 20px var(--neon-cyan);
        }

        #loading-screen p {
            color: #aaa;
            font-family: var(--font-mono);
            margin-top: 1rem;
        }

        /* ===== MAIN HUD (existing elements) ===== */
        #ui-layer {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            background: var(--bg-overlay);
            padding: clamp(15px, 4vw, 25px);
            border-radius: 12px;
            pointer-events: none;
            border-left: 5px solid var(--neon-cyan);
            backdrop-filter: blur(10px);
            z-index: 10;
            box-shadow: var(--glow-cyan);
            max-width: min(350px, 90%);
        }

        #ui-layer h1 {
            margin: 0;
            font-size: clamp(1.2rem, 5vw, 1.8rem);
            color: var(--neon-cyan);
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: var(--glow-cyan);
        }

        .subtitle {
            font-size: 0.8rem;
            color: var(--neon-pink);
            margin-bottom: 15px;
            text-transform: uppercase;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .race-stats {
            margin-bottom: 15px;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
        }

        .stat-line {
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }

        .stat-value {
            color: var(--neon-cyan);
            font-weight: bold;
            font-family: var(--font-mono);
        }

        .controls {
            margin-top: 10px;
            font-size: 0.85rem;
            color: #aaa;
            line-height: 1.8;
        }

        .key {
            display: inline-block;
            background: #222;
            padding: 2px 8px;
            border-radius: 4px;
            border: 1px solid #444;
            font-family: var(--font-mono);
            color: #fff;
            margin-right: 4px;
            box-shadow: 0 2px 0 #000;
        }

        #nitro-bar {
            width: 100%;
            height: 8px;
            background: #222;
            margin-top: 15px;
            border-radius: 4px;
            overflow: hidden;
        }

        #nitro-fill {
            width: 100%;
            height: 100%;
            background: var(--neon-cyan);
            box-shadow: var(--glow-cyan);
            transition: width 0.1s;
        }

        /* ===== SPEEDOMETER ===== */
        #speedometer {
            position: absolute;
            bottom: clamp(20px, 8vh, 40px);
            right: clamp(20px, 5vw, 40px);
            color: var(--neon-cyan);
            font-family: var(--font-mono);
            text-align: right;
            pointer-events: none;
            text-shadow: var(--glow-cyan);
            z-index: 10;
        }

        .speed-val {
            font-size: clamp(3rem, 15vw, 5rem);
            font-weight: 900;
            line-height: 0.8;
            font-style: italic;
        }

        .speed-unit {
            font-size: clamp(1rem, 4vw, 1.5rem);
            color: var(--neon-pink);
            font-weight: bold;
            text-transform: uppercase;
        }

        /* ===== OVERLAYS (Menu, Pause, Game Over) ===== */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-overlay);
            backdrop-filter: blur(8px);
            z-index: 200;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-family: var(--font-mono);
        }

        .overlay.active {
            display: flex;
        }

        .overlay h1 {
            font-size: clamp(2.5rem, 10vw, 5rem);
            margin-bottom: 1rem;
            text-transform: uppercase;
        }

        .overlay p {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: #ccc;
        }

        .overlay button {
            background: transparent;
            border: 2px solid var(--neon-cyan);
            color: var(--neon-cyan);
            font-size: 1.5rem;
            padding: 15px 30px;
            margin: 10px;
            cursor: pointer;
            font-family: var(--font-mono);
            text-transform: uppercase;
            border-radius: 5px;
            transition: var(--transition);
            box-shadow: 0 0 10px var(--neon-cyan);
        }

        .overlay button:hover {
            background: var(--neon-cyan);
            color: #000;
            box-shadow: 0 0 20px var(--neon-cyan);
        }

        .overlay button.secondary {
            border-color: #fff;
            color: #fff;
            box-shadow: none;
        }

        .overlay button.secondary:hover {
            background: #fff;
            color: #000;
        }

        /* ===== TOUCH CONTROLS (visible only on mobile) ===== */
        #touch-controls {
            position: fixed;
            bottom: 20px;
            left: 0;
            width: 100%;
            height: 200px;
            display: none;
            justify-content: space-between;
            pointer-events: none;
            z-index: 300;
        }

        @media (pointer: coarse) {
            #touch-controls {
                display: flex;
            }
        }

        .touch-zone {
            width: 40%;
            height: 100%;
            pointer-events: auto;
            background: rgba(0, 255, 204, 0.05);
            border: 1px dashed rgba(0, 255, 204, 0.3);
            transition: background 0.2s;
        }

        .touch-zone:active {
            background: rgba(0, 255, 204, 0.2);
        }

        #touch-nitro {
            position: absolute;
            bottom: 30px;
            right: 30px;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: rgba(255, 0, 102, 0.2);
            border: 4px solid var(--neon-pink);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: bold;
            pointer-events: auto;
            box-shadow: 0 0 20px var(--neon-pink);
            transition: var(--transition);
        }

        #touch-nitro:active {
            background: rgba(255, 0, 102, 0.6);
            transform: scale(0.95);
        }

        /* ===== DEBUG OVERLAY ===== */
        #debug-overlay {
            position: absolute;
            bottom: 10px;
            left: 10px;
            color: #ff0;
            font-size: 12px;
            font-family: monospace;
            z-index: 1000;
            background: rgba(0,0,0,0.5);
            padding: 4px 8px;
            border-radius: 4px;
            pointer-events: none;
        }

        /* ===== RESPONSIVE ADJUSTMENTS ===== */
        @media (max-width: 600px) {
            #ui-layer {
                top: 10px;
                left: 10px;
                padding: 12px;
                max-width: calc(100% - 20px);
            }

            .controls {
                font-size: 0.75rem;
            }

            .overlay button {
                font-size: 1.2rem;
                padding: 12px 24px;
            }
        }
    </style>
  <script type="module" crossorigin src="/assets/index-GGQGKJ1f.js"></script>
</head>
<body>

    <!-- ===== LOADING SCREEN ===== -->
    <div id="loading-screen">
        <h1>TURBO DRIFT 3D</h1>
        <div class="progress-container">
            <div id="loading-progress"></div>
        </div>
        <p id="loading-text">Loading assets...</p>
    </div>

    <!-- ===== MAIN HUD (always present, initially hidden until game starts) ===== -->
    <div id="ui-layer" style="display: none;">
        <h1>Turbo Drift 3D</h1>
        <div class="subtitle">Sprint 5: AI Rivals & Competition</div>
        
        <div class="race-stats">
            <div class="stat-line">Position: <span class="stat-value" id="pos-text">1 / 4</span></div>
            <div class="stat-line">Closest Rival: <span class="stat-value" id="rival-dist">-- m</span></div>
            <div class="stat-line">Lap: <span class="stat-value" id="lap-text">1/3</span></div>
            <div class="stat-line">Score: <span class="stat-value" id="score-text">0</span></div>
        </div>

        <div class="controls">
            <div><span class="key">W</span> / <span class="key">↑</span> Accelerate</div>
            <div><span class="key">S</span> / <span class="key">↓</span> Brake / Drift</div>
            <div><span class="key">A</span> <span class="key">D</span> / <span class="key">←</span> <span class="key">→</span> Steer</div>
            <div><span class="key">Shift</span> / <span class="key">N2O</span> Nitro Boost</div>
        </div>

        <div id="nitro-bar"><div id="nitro-fill"></div></div>
    </div>

    <!-- ===== SPEEDOMETER ===== -->
    <div id="speedometer" style="display: none;">
        <p class="speed-val" id="speed-text">000</p>
        <p class="speed-unit">km/h</p>
    </div>

    <!-- ===== MENU OVERLAY ===== -->
    <div id="menu-overlay" class="overlay">
        <h1 style="color: var(--neon-cyan);">TURBO DRIFT 3D</h1>
        <p style="color: #aaa;">Cyberpunk Racing</p>
        <button id="start-btn">START RACE</button>
        <button id="controls-btn" class="secondary">CONTROLS</button>
        <button id="leaderboard-btn" class="secondary">LEADERBOARD</button>
    </div>

    <!-- ===== PAUSE OVERLAY ===== -->
    <div id="pause-overlay" class="overlay">
        <h1 style="color: var(--neon-cyan);">PAUSED</h1>
        <button id="resume-btn">RESUME</button>
        <button id="restart-btn" class="secondary">RESTART</button>
        <button id="quit-btn" class="secondary">QUIT TO MENU</button>
    </div>

    <!-- ===== GAME OVER OVERLAY ===== -->
    <div id="gameover-overlay" class="overlay">
        <h1 style="color: var(--neon-pink);">RACE FINISHED</h1>
        <p>RANK: <span id="final-rank">1</span> / 4</p>
        <p>SCORE: <span id="final-score">0</span></p>
        <button id="restart-game-btn">RESTART</button>
        <button id="menu-game-btn" class="secondary">MENU</button>
    </div>

    <!-- ===== TOUCH CONTROLS (visible only on touch devices) ===== -->
    <div id="touch-controls">
        <div id="touch-left" class="touch-zone"></div>
        <div id="touch-right" class="touch-zone"></div>
        <div id="touch-nitro">N2O</div>
    </div>

    <!-- ===== DEBUG OVERLAY (hidden by default) ===== -->
    <div id="debug-overlay" style="display: none;">
        FPS: <span id="fps">60</span> | <span id="debug-pos">0,0,0</span>
    </div>

    <!-- Entry point for the game engine -->
</body>
</html>